(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9648],{19648:(e,t,n)=>{"use strict";n.d(t,{O:()=>N});var r=n(86354),o=n(12714),i=function(e){return e.csi.survey_uid},a=n(23095),c=n(39256),s=n(35346),u=n(93734),l=n(82603),d=l.yv?21:23,p=l.yv?97:96,f=l.yv?246:296,m=l.yv?"prod":"qa-dc",h="CSI_COOKIE_VITRINA",v=n(59536),_=n(9646),b=n(91463),g=n.n(b),y=n(71546),E=n(6861),w=n(19649),S=n(12248),O=n(24572),I=n(10374),A=n(94862),C=n(88816),x=function(){var e,t=new y.UAParser,n=(0,c.r1)(),r=t.getBrowser(),i=r.name,a=r.version,s=void 0===a?"":a,u=(0,C.vR)().pathname,l=(0,o.useSelector)(w.lj),d=(0,o.useSelector)(S.Sv),p=(0,o.useSelector)(O.bU),f=(0,o.useSelector)(S.uH),m=(0,o.useSelector)(I.Y6),h=(0,o.useSelector)(S.qd),v=n.getCookie(A.U9),_=n.getCookie(A.DI),b=n.getExperimentInfo();return{region:l,aids:d,complexIds:p,dealType:(0,E.getDealTypeLabel)(f),device:m?"desktop":"mobile",url:"undefined"==typeof window||null==(e=window.location)?void 0:e.href,page:u,filters:g()({},h,{coordinates:{sw:h.sw||0,ne:h.ne||0}}),ab:b,ga:v,ym_uid:_,browser:i?i+"_"+s:""}},T=n(63565),k=function(e){var t=e.onSubmit,n=e.templateId,o=(0,r.useRef)((0,_.Z)()),i=x();return(0,T.jsx)(v.CSI,{env:m,serviceId:d,templateId:n,operationId:o.current,context:i,onSubmit:t,"data-test":"csi-widget"})};k.defaultProps={templateId:p,context:{}};var j=function(e){var t=e.surveyUID,n=e.onSubmit;return(0,T.jsx)(v.CSI,{env:m,surveyUID:t,onSubmit:n,"data-test":"csi-widget"})};var N=function(){var e=function(){var e=(0,o.useSelector)(s.b_),t=(0,o.useSelector)(i),n=(0,o.useSelector)(s.To),d=(0,c.r1)(),m="recommendation"===(0,a.xp)()?f:p,v=!d.hasCookie(h)&&n,_=(0,r.useCallback)((function(){d.setCookie(h,!0,{domain:l.yG?".qa-dc.ru":".domclick.ru"})}),[d]),b=(0,o.useDispatch)(),g=(0,r.useCallback)((function(){b((0,u.PY)({patternId:m}))}),[b,m]);return(0,r.useEffect)((function(){v&&(e||g())}),[g,e,v]),{surveyUID:t,fetchCSI:g,templateId:m,onSubmit:_,isVisible:v,isUserAuth:e}}(),t=e.surveyUID,n=e.templateId,d=e.onSubmit,m=e.isVisible,v=e.isUserAuth;return m?(0,T.jsx)("div",{className:"mfNC1",children:v?(0,T.jsx)(k,{onSubmit:d,templateId:n}):t&&(0,T.jsx)(j,{surveyUID:t,onSubmit:d})}):null}},59536:(e,t,n)=>{var r;globalThis,r=()=>(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p:"/"},t={};e.r(t),e.d(t,{CSI:()=>Wt,CSIPopup:()=>Ht});const r=n(62808);var o=e.n(r);const i=n(86354);var a=e.n(i),c=function(e){var t=Object.keys(e),n=function(e,t){return t.every((function(t){return e.includes(t)}))},r=n(t,["operationId","templateId","serviceId"]),o=n(t,["surveyUID"])||n(t,["message","signature","signedBy"]);return r||o?r:new Error("CSI widget: unexpected params passed as props, check config")},s=function(){return"undefined"!=typeof window},u=function(e){var t=[],n=c(e);if(n instanceof Error)return console.error(n),e.onError&&e.onError(n),!1;if(e.env||t.push("env"),n?(e.operationId||t.push("operationId"),e.templateId||t.push("templateId"),e.serviceId||t.push("serviceId")):n||e.surveyUID||(e.message||t.push("message"),e.signature||t.push("signature"),e.signedBy||t.push("signedBy")),t.length>0){var r=new Error("CSI widget: there is no some of required props: ".concat(t.join(", ")));return console.error(r),e.onError&&e.onError(r),!1}if(s()&&!window.fetch){var o=new Error("browser is not supported");return e.onError&&e.onError(o),!1}return!0};const l=n(94772);var d=e.n(l);const p=n(55415);var f=e.n(p);const m=n(40233);var h=e.n(m);const v=n(30560);var _=e.n(v);const b=n(66797);var g=e.n(b);const y=n(73965);var E,w;!function(e){e.local="local",e.qa="qa",e["qa-dc"]="qa-dc",e.stage="stage",e.staging="staging",e["stage-dc"]="stage-dc",e.prod="prod",e.production="production"}(E||(E={})),function(e){e.stars="stars",e.emoji="emoji"}(w||(w={}));var S,O="609",I="10.0.8",A="".concat("@clic/csi_widget_ssr","@").concat(I,":").concat(O),C=function(e){switch(e){case E.qa:return"https://a7276d4a96ae4d7da71e41b028499e68@dev-sentry.domclick.ru/179";case E.stage:case E.staging:return"https://c3322da108b54a169a9cc4ec957ebb22@dev-sentry.domclick.ru/180";default:return"https://8e3cc6d865154e11b3c56cb9b6c7cbe5@sentry.domclick.ru/295"}},x=null,T=null,k=function(e,t){x?(x.setTags({href:window.location.href,build_number:O,version:I,"x-service":A,"x-origin":window.location.href,templateId:t}),x.setUser({casId:T}),x.captureException(e)):console.error(e)},j=function(e){function t(){return d()(this,t),e=this,n=t,r=arguments,n=_()(n),h()(e,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(n,r||[],_()(e).constructor):n.apply(e,r));var e,n,r}return g()(t,e),f()(t,[{key:"componentDidMount",value:function(){var e,t,n,r;n=(t={env:this.props.env,casId:(e=document.cookie.match(/CAS_ID=(\d+)/))?Number(e[1]):null}).env,r=t.casId,x=new y.SentryClient({dsn:C(n),release:A,environment:n}),T=r}},{key:"componentDidCatch",value:function(e,t){k("error:".concat(e.toString(),"; info:").concat(JSON.stringify(null==t?void 0:t.componentStack)),this.props.templateId)}},{key:"render",value:function(){return this.props.children}}]),t}(a().Component);!function(e){e[e.medium=317]="medium",e[e.large=517]="large"}(S||(S={}));var N="__DOMCLICK_CSI_WIDGET_OPEN__",M="Чтобы отправить оценку, выберите причину или напишите комментарий",R=3e3;const B=n(73968);var F=e.n(B);const P=n(12714),L=n(31879);var D=e.n(L);const U=n(91823),Z=n(98182),q=n(75900);var z=e.n(q);const W=n(80801),H=n(81432),V=n(81507);var G;!function(e){e.small="small",e.medium="medium",e.large="large"}(G||(G={}));var J=function(e){switch(e){case G.small:return V.Headline4;case G.medium:return V.Headline3;case G.large:default:return V.Headline2}},K="SET_IMAGE_LOADED_ACTION",X="SET_INITIAL_ERROR_ACTION",Y=function(e){return{type:X,payload:e}},Q="SET_ANSWER_ACTION",$=function(e){return{type:Q,payload:e}},ee="SET_ANSWER_TAG_ACTION",te="SET_ANSWER_COMMENT_ACTION",ne="SET_ANSWER_ACTIVE_ACTION",re="SET_RATING_ACTION",oe="RESET_STATE_ACTION",ie="SET_BANNER_SIZE_ACTION",ae="SET_INIT_SUBMITTED_ACTION",ce=function(e){return{type:ae,payload:e}},se="SET_SUBMITTED_ACTION",ue="SET_SUBMITTED_ERROR_ACTION",le=function(e){return{type:ue,payload:e}},de="SET_BASEURL_ACTION",pe="SET_UPDATE_CONTEXT_URL_ACTION",fe="SET_LOADING_ON_ACTION",me=function(){return{type:fe}},he="SET_LOADING_OFF_ACTION",ve=function(){return{type:he}},_e="SET_CONTEXT_ACTION",be=function(e){return{type:_e,payload:e}};function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ye=function(e){var t,n=e.withName,r=e.activeTags,i=null===(t=e.answers[e.rating-1])||void 0===t?void 0:t.tags;return i&&i.filter((function(e){var t=e.id;return r.some((function(e){return e===String(t)}))})).map((function(e){var t=e.id,r=e.name;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t},n&&{name:r})}))||[]};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=function(e){var t=e.withText,n=e.activeActions,r=e.actionsInfo,o=e.rating,i=r&&r.find((function(e){return e.rating===o})),a=i||{},c=a.id,s=a.text;return i&&c&&n.includes(c)&&[we({id:c},t&&{text:s})]||[]};const Oe=n(8420);var Ie=e.n(Oe),Ae=function(e){var t=Object.keys(e),n={};return t.forEach((function(t){var r=e[t],o=Ce(t);n[o]=r})),n},Ce=function(e){return e.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())}))};const xe=n(45449);var Te,ke=e.n(xe),je=function e(t,n){if(!t)return t;var r={};return Object.keys(t).forEach((function(o){var i=t[o],a=Ne(o);if(null!=n&&n.includes(o))r[o]=i;else if(Array.isArray(i)){var c=i.map((function(t){return t&&"object"===ke()(t)?e(t):t}));r[a]=c}else i&&"object"===ke()(i)?r[a]=e(i):r[a]=i})),r},Ne=function(e){return e.toLowerCase().replace(/([-_][a-z])/g,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))},Me=["errors"];!function(e){e.POST="post",e.GET="get",e.DELETE="delete",e.PATCH="PATCH"}(Te||(Te={}));var Re=function(){function e(t,n){if(d()(this,e),o()(this,"requestURL",""),!t)throw new Error("expect baseURL");this.requestURL="".concat(t,"/").concat(n)}return f()(e,[{key:"sendPostRequest",value:function(e){var t=Ae(e),n=JSON.stringify(t);return this.request(Te.POST,n)}},{key:"sendPatchRequest",value:function(e){var t=Ae(e),n=JSON.stringify(t);return this.request(Te.PATCH,n)}},{key:"sendGetRequest",value:function(e){return this.request(Te.GET,e)}},{key:"request",value:function(e,t){var n={method:e,credentials:"include",headers:{"Content-Type":"application/json"},body:t};return fetch(this.requestURL,n).then((function(e){return e.ok?e.json().then((function(e){var t=e.data;return je(t,["context"])})):e.json().then((function(t){var n=t.errors,r=Ie()(t,Me);return Promise.reject({errors:n,status:e.status,data:r.data})}))})).catch((function(e){var t=e.errors,n=e.status,r=e.data;return 409!==n&&k(t),Promise.reject({errors:t,status:n,data:je(r)})}))}}]),e}(),Be=function(e){var t={};return e&&Object.keys(e).forEach((function(n){"string"==typeof e[n]?t[n]=e[n]:t[n]=JSON.stringify(e[n])})),t},Fe=["context"];function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=function(e){return e&&e.reduce((function(e,t){var n=t.id,r=t.type,o=t.options;return"CONTACT_ME_BAD_ANSWER"===r&&o.showOnStars.map((function(t){return e.push({id:n,rating:t,text:o.text})})),e}),[])};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We={isInitError:!1,isSubmitError:!1,submited:!1,rating:0,baseURL:"",updateContextURL:"",comment:"",answers:[],activeTags:[],activeActions:[],actionsInfo:[],title:"",options:null,context:null,questionId:null,surveyId:null,uid:"",imageLoaded:!1,bannerSize:null,scale:null,isLoading:!1,disabled:!1},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case K:return ze(ze({},e),{},{imageLoaded:!0});case X:return ze(ze({},e),{},{isInitError:r});case ne:return ze(ze({},e),{},{activeActions:r});case Q:return ze(ze({},e),r);case ee:return ze(ze({},e),{},{activeTags:r});case te:return ze(ze({},e),{},{comment:r});case re:return ze(ze({},e),{},{rating:r||0});case ie:return ze(ze({},e),{},{bannerSize:r});case se:return ze(ze({},e),{},{submited:!0});case ae:return ze(ze({},e),{},{disabled:r,submited:!0});case ue:return ze(ze({},e),{},{isSubmitError:r});case de:return ze(ze({},e),{},{baseURL:r});case pe:return ze(ze({},e),{},{updateContextURL:r});case oe:return ze(ze({},e),{},{submited:!1,isInitError:!1,rating:0,comment:"",title:"",questionId:null,surveyId:null,context:null});case fe:return ze(ze({},e),{},{isLoading:!0});case he:return ze(ze({},e),{},{isLoading:!1});case _e:return ze(ze({},e),{},{context:r});default:return e}};const Ve=e.p+"src/icons/success.svg";var Ge=function(e){var t=e.onShow,n=e.children;return(0,i.useEffect)((function(){t()}),[]),a().createElement("div",{className:"Main-module__main__OmoEuiv_"},n)};const Je=n(80797);var Ke=function(e){var t=e.isOpen,n=e.onClose,r=e.children,o=e.className;return a().createElement(Je.Modal,{onClose:n,open:t,verticalCentering:!0,"data-e2e-id":"csi_widget_popup"},a().createElement("div",{className:z()(o,"Popup-module__popup__dzCDBUAz")},r))};const Xe=n(65334);var Ye=e.n(Xe);const Qe=n(68448);var $e=function(e){var t=e.children,n=e.setBannerSize,r=e.className,o=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e=function(e){var t=e.setBannerSize;return new(Ye())((function(e){return window.requestAnimationFrame((0,Qe.throttle)(500,(function(){if(Array.isArray(e)&&e.length){var n=(r=e[0].contentRect.width)>=S.large?G.large:r>=S.medium?G.medium:G.small;t(n)}var r})))}))}({setBannerSize:n}),t=o.current;return t&&e.observe(t),function(){t&&e.unobserve(t)}}),[o.current,n]),a().createElement("div",{className:z()("Banner-module__banner__EbHKYuM_",r),ref:o},t)};const et=n(84682);var tt=e.n(et);const nt=n(53255),rt=n(24854);var ot=function(e){var t=e.tags,n=e.activeTags,r=e.onValueChange,o=e.multiple,i=t.map((function(e){var t=e.id,n=e.name;return{value:String(t),text:n}}));return a().createElement("div",{className:"TagForm-module__tag_form__mohfuT8K"},a().createElement("div",{className:"TagForm-module__tags__TP0svgal"},a().createElement(rt.MultipleButtonSelect,{"data-e2e-id":"csi_widget_tags",onValueChange:function(e){if(o)r(e);else{var t=e.find((function(e){return!n.includes(e)}));t&&r([t])}},value:n,size:rt.ButtonSelectSize.Small,items:i})))};const it=n(21386);var at=e.n(it);const ct=n(30225);var st=function(e){var t=e.activeActions,n=e.className,r=e.action,o=r.id,i=r.text,c=e.onValueChange;return a().createElement("div",{className:n},a().createElement(ct.Checkbox,{checked:t.includes(o),size:ct.CheckboxSize.Small,onValueChange:function(e){if(e){if(t.includes(o))return;var n=[].concat(at()(t),[o]);c(n)}else{var r=t.filter((function(e){return e!==o}));c(r)}},label:i}))};const ut=n(3094),lt=e.p+"src/icons/emoji1.png",dt=e.p+"src/icons/emoji2.png",pt=e.p+"src/icons/emoji3.png",ft=e.p+"src/icons/emoji4.png",mt=e.p+"src/icons/emoji5.png",ht="Emoji-module__emojiIcon__J1s1NFJd";var vt=[null,lt,dt,pt,ft,mt],_t=function(e){var t=e.isActive,n=e.className,r=e.description,c=e.onClick,s=e.value,u=e.onMouseEnter,l=e.onMouseLeave,d=e.staticUrl,p=(0,i.useState)(!1),f=tt()(p,2),m=f[0],h=f[1],v=z()(n,"Emoji-module__emoji__XXTAQnWu",o()({},"Emoji-module__active__hpk2xfNP",t)),_=m?ht:"Emoji-module__emojiIconHidden__ogNpQ_Nv";return a().createElement("button",{"data-e2e-id":"csi_widget_mark",type:"button",tabIndex:-1,className:v,onClick:function(){c(s)},onMouseEnter:function(){u(s)},onMouseLeave:l},!m&&a().createElement(ut.Skeleton,{type:ut.SkeletonType.Circle,className:z()(ht,"Emoji-module__imageSkeleton__AQg7h3qm"),height:"100%"}),a().createElement("img",{className:_,src:"".concat(d).concat(vt[s]),alt:"emoji".concat(s),onLoad:function(){h(!0)},loading:"lazy"}),a().createElement(V.TextRegular,{tag:"span",className:"Emoji-module__description___BsIB1Mb"},r))},bt=function(e){for(var t=e.rating,n=e.answers,r=e.className,c=e.emojiClassName,s=e.id,u=e.onChange,l=e.staticUrl,d=(0,i.useState)(0),p=tt()(d,2),f=p[0],m=p[1],h=[],v=function(e){u(e||f)},_=function(e){m(e)},b=function(){m(0)},g=1;g<=5;g++){var y=n[g-1];h.push(a().createElement(_t,{key:g,value:g,isActive:t?g===t:g===f,description:null==y?void 0:y.name,onClick:v,onMouseEnter:_,onMouseLeave:b,className:z()(c,"EmojisForm-module__emoji__ag7hAFCL"),staticUrl:l}))}return a().createElement("div",{className:z()(r,"EmojisForm-module__emojis__ugy6UntU",o()(o()({},"EmojisForm-module__emojis_hovered__ygT1mSoW",f),"EmojisForm-module__emojis_selected__D_L7YriW",t)),id:s},h)},gt=function(e){var t=e.className,n=e.isActive,r=e.onClick,o=e.onMouseEnter,i=e.value,c=e.onMouseLeave,s="".concat(t," ").concat("Star-module__star__rAWIfizs"," ").concat(n?"Star-module__active__mPU8GBos":"");return a().createElement("svg",{"data-e2e-id":"csi_widget_mark",width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:function(){r(i)},onMouseEnter:function(){o(i)},onMouseLeave:c,className:s},a().createElement("path",{d:"M32 46.7189L43.0667 53.4123C45.0934 54.6389 47.5734 52.8256 47.04 50.5323L44.1067 37.9456L53.8934 29.4656C55.68 27.9189 54.72 24.9856 52.3734 24.7989L39.4934 23.7056L34.4534 11.8123C33.5467 9.65226 30.4534 9.65226 29.5467 11.8123L24.5067 23.6789L11.6267 24.7723C9.28004 24.9589 8.32004 27.8923 10.1067 29.4389L19.8934 37.9189L16.96 50.5056C16.4267 52.7989 18.9067 54.6123 20.9334 53.3856L32 46.7189Z",fill:"#A7A8A9"}))},yt=function(e){for(var t=e.rating,n=e.answers,r=e.className,c=e.starClassName,s=e.onChange,u=(0,i.useState)(0),l=tt()(u,2),d=l[0],p=l[1],f=[],m=n[(t||d)-1],h=function(e){s(e||d)},v=function(e){p(e)},_=function(){p(0)},b=1;b<=5;b++)f.push(a().createElement(gt,{key:b,value:b,isActive:b<=t||b<=d,onClick:h,onMouseEnter:v,onMouseLeave:_,className:z()(c,"StarsForm-module__element__mDu3rs8o")}));return a().createElement("div",{className:z()(r,"StarsForm-module__wrapper__vSePurSP",o()({},"StarsForm-module__wrapper_selected__ZpuCWNhO",t))},a().createElement("div",{className:"StarsForm-module__stars__xCNZbhHt"},f),a().createElement(V.TextRegular,{className:"StarsForm-module__ratingAsText__h1TM_otg"},(null==m?void 0:m.name)||" "))},Et=function(e){var t=e.feedbackType,n=e.optionClassName,r=e.className,o=e.onChange,i=e.answers,c=e.rating,s=e.staticUrl;return"emoji"===t?a().createElement(bt,{onChange:o,answers:i,rating:c,className:r,emojiClassName:n,staticUrl:s}):a().createElement(yt,{onChange:o,answers:i,rating:c,className:r,starClassName:n})};const wt=n(65100);var St=function(e){var t=e.children,n=e.showTooltip;return a().createElement(wt.Tooltip,{open:!!n&&void 0,text:M,mobilePlacement:wt.TooltipMobilePlacements.Top,disableHideOnScroll:!0,onVisibleChange:function(e){e&&n&&(0,Z.sendAnalytics)({event_type:"view",element_type:"tooltip_needs_comment_or_tag_text",element_id:"69938bc822e88a4f27657ff47c411d06"})}},t)},Ot=(0,Qe.isTouchDevice)(),It=function(e){var t=e.onSubmit,n=e.isActiveTags,r=e.comment,o=e.rating,c=e.commentOrTagRequired,s=e.submitButtonText,u=e.buttonWrapClass,l=e.isLoading,d=e.disabled,p=void 0!==d&&d,f=(0,i.useState)(!1),m=tt()(f,2),h=m[0],v=m[1],_=(0,Qe.useBreakpoint)()===Qe.BreakPoints.MOBILE,b=(0,Qe.useResize)().width,g=void 0===b?0:b;(0,i.useEffect)((function(){v(!1)}),[n,r,o]);var y=c&&!r&&!n,E=_&&Ot&&y;return(0,i.useEffect)((function(){h&&(0,Z.sendAnalytics)({event_type:"view",element_type:"needs_comment_or_tag_text",element_id:"aa6cf6cbfccf7781065a18c3d90054a9"})}),[h]),a().createElement(a().Fragment,null,(!Ot||!_)&&h&&a().createElement("div",{"data-e2e-id":"csi_widget_require_tags_or_comment"},a().createElement(V.TextRegular,{className:"SubmitBlock-module__submit_warn__r1Jmr1fT"},M)),a().createElement("div",{className:u},a().createElement(St,{showTooltip:E},a().createElement(H.Button,{fluid:g<=380,text:s||"Оценить",onClick:function(){y?v(!0):t()},"data-e2e-id":"csi_widget_feedback_form__btn_estimate",loading:l,disabled:p}))))},At=function(e){var t=e.count,n=e.max,r=void 0===n?R:n,i=t>r,c=z()("SymbolCounter-module__symbolCounter__duc3lpDT",o()({},"SymbolCounter-module__symbolCounter_error__nIJVGsJs",i));return a().createElement("span",{className:c},t,"/",r)};const Ct={ratingForm:"FeedbackForm-module__ratingForm__MpKs4kek",ratingOption:"FeedbackForm-module__ratingOption___RJu5a3Z",banneredBlock:"FeedbackForm-module__banneredBlock__iFUNeZAM",title:"FeedbackForm-module__title__IsqkkqSD",submitBlock:"FeedbackForm-module__submitBlock__h9JR_VG9",buttonWrap:"FeedbackForm-module__buttonWrap__QIF4xBgU",banneredBlock_small:"FeedbackForm-module__banneredBlock_small__DJLucGqP",submitWarn:"FeedbackForm-module__submitWarn__eO1WMchD",banneredBlock_medium:"FeedbackForm-module__banneredBlock_medium__xUBWelJK",banneredBlock_large:"FeedbackForm-module__banneredBlock_large__a_nSXR_b",commentAnim:"FeedbackForm-module__commentAnim__Z1tHqoKJ",questionText:"FeedbackForm-module__questionText__nvaNvsnB",title_active:"FeedbackForm-module__title_active__VmfMngrO",action:"FeedbackForm-module__action__VfLE1kv2",elementInactive:"FeedbackForm-module__elementInactive__d2V6UwNU",fadeIn:"FeedbackForm-module__fadeIn__NjFtAZRy",fadeOut:"FeedbackForm-module__fadeOut__NXYBhrrO",scaleIn:"FeedbackForm-module__scaleIn__SgZDqzdg"};var xt=function(e){var t=e.rating,n=e.feedbackType,r=e.title,c=e.titleClassName,s=void 0===c?"":c,u=e.answers,l=e.activeTags,d=e.activeActions,p=e.actionsInfo,f=e.comment,m=e.onRatingChange,h=e.onCommentChange,v=e.onTagChange,_=e.onActionChange,b=e.onSubmit,g=e.bannerSize,y=e.isPopup,E=e.options,w=e.isOnlyRating,S=e.isLoading,O=e.staticUrl,I=(0,i.useMemo)((function(){return p&&p.find((function(e){return e.rating===t}))}),[p,t]),A=(0,i.useMemo)((function(){var e,n,r=u[t-1];return[null==r?void 0:r.subtitle,null==r?void 0:r.tags,null==r||null===(e=r.options)||void 0===e?void 0:e.allowMultipleTags,null==r||null===(n=r.options)||void 0===n?void 0:n.commentOrTagIsRequired,null==r?void 0:r.commentPlaceholder]}),[u,t]),C=tt()(A,5),x=C[0],T=C[1],k=C[2],j=C[3],N=C[4],M=(0,i.useMemo)((function(){return J(g)}),[g]),B=l.some((function(e){return T&&T.some((function(t){return String(t.id)===e}))})),F=z()(o()(o()(o()(o()(o()({},Ct.rated,t>0),Ct.banneredBlock,Boolean(g)),Ct.banneredBlock_medium,g===G.medium||g===G.large),Ct.banneredBlock_large,g===G.large),Ct.banneredBlock_small,g===G.small)),P=(0,i.useCallback)((function(e){e.stopPropagation()}),[]);return a().createElement("div",{className:F},a().createElement(M,{className:z()(Ct.title,o()(o()({},Ct.title_active,t),s,y))},r),a().createElement(Et,{feedbackType:n,rating:t,answers:u,onChange:m,className:Ct.ratingForm,optionClassName:Ct.ratingOption,staticUrl:O}),t>0&&!w&&a().createElement("div",{className:Ct.submitBlock},x&&a().createElement(V.Headline4,{className:Ct.questionText},x),T&&a().createElement(ot,{tags:T,activeTags:l,onValueChange:v,multiple:k}),a().createElement(nt.Textarea,{"data-e2e-id":"csi_widget_textarea",value:f,onValueChange:h,placeholder:N,showClearIcon:!1,rows:4,onKeyDown:P,rightBottomSection:R-f.length<500&&a().createElement(At,{count:f.length})}),I&&a().createElement(st,{action:I,activeActions:d,onValueChange:_,className:Ct.action}),a().createElement(It,{onSubmit:b,isActiveTags:B,comment:f,rating:t,commentOrTagRequired:j,submitButtonText:null==E?void 0:E.nextButtonText,buttonWrapClass:Ct.buttonWrap,isLoading:S,disabled:f.length>R})))},Tt=function(){return a().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"180",height:"180",fill:"none"},a().createElement("circle",{cx:"89.75",cy:"89.5",r:"82.5",fill:"#E3FBFD"}),a().createElement("g",{mask:"url(#mask0)"},a().createElement("path",{fill:"#C6EEFF",d:"M63.738 129.331c-1.896 2.344-13.193 1.899-28.576 3-13.97 1-63.06 4.991-26.731 17.704 10.18 3.563 43.6 8.87 62.565 3.563C82.957 150.251 111.2 156 124 156c21.334 0 40.656-.453 46.5-14 7.5-13.298-34.005-14.146-39.857-16.298-2.515-.924-.758-4.366 2.827-5.034 3.586-.668-7.872-4.754-28.682-5.171-20.81-.417-47.4 4.012-47.4 7.849 0 3.837 8.247 3.641 6.35 5.985Z"})),a().createElement("path",{fill:"#E2A300",d:"M33.717 135.861c-3.856 0-2.811 1.4 0 1.579 2.811.179 7.5 1.534 4.167 2.074-3.334.54-1.978 1.444.244 1.712 2.222.272 7.9.991 5.928 1.713-1.978.722-3.578 1.173 2.467 1.351 6.045.179 9.19-1.895 5.211-2.073-3.978-.179-9.656-2.062-6.817-1.932 2.84.13 12.468.941 9.756-.503-2.717-1.445-11-1.421-7.317-1.896 3.723-.478 10.74-.093 7.795-.994-2.945-.893-21.434-1.031-21.434-1.031Zm60.496 2.457c-3.883-.633-3.101-2.811 5.927-2.216 8.391.551 16.83 0 17.624 1.469-.32 2.153-7.114 1.008-6.483 2.153.625 1.146 7.73 1.097 1.896 1.876-1.616.216-6.163.92-6.163 1.407 0 .486 7.112.468 7.112 1.406s-14.223 2.345-15.172.469c-.948-1.875 4.741-2.826 4.741-3.282 0-.457-9.481.938-9.482-.469 0-1.407 5.69-.469 5.927-1.407 0-.754-5.927-1.406-5.927-1.406Z",opacity:".5"}),a().createElement("path",{fill:"#C69409",d:"M129.591 27.296c-.307-2.174-2.049-3.779-4.093-3.779l-66.917.54 17.383 111.174H91.36l-1.505-10.497 37.863.405 1.873 10.092H145L129.591 27.296ZM82.185 34.75l-.745-4.103c-.156-1.043.594-1.99 1.58-1.99l17.771-.54c1.213 0 2.245.946 2.437 2.232l.654 4.4H82.185Z"}),a().createElement("path",{fill:"#FFC610",d:"M120.197 23h-62.91c-2.092 0-3.88 1.493-4.225 3.53l-18.32 109.703h16.533l2.505-15.031h44.091l-1.002 15.031h17.035l10.301-108.94c.192-2.31-1.652-4.293-4.008-4.293ZM99.33 36.536H73.956l.924-4.768c.258-1.203 1.524-2.112 2.77-2.112h20.025c1.373 0 2.422 1.208 2.209 2.546l-.552 4.334Z"}),a().createElement("path",{fill:"#EFB103",d:"M68.309 41.872h-8.691l-4.829 5.311-2.414 14.486 15.934-19.797Zm18.831 0h-9.657L49.96 76.154l-2.415 14.485L87.14 41.872Zm20.279 0h-9.657L44.65 107.538l-1.208 7.243h6.519l57.458-72.909ZM70.24 114.781l46.835-60.838.966-12.07h-1.931L60.583 114.78h9.657Zm18.83.483 25.109-33.316 1.448-14.968-36.213 48.284h9.657Zm19.314-.483 3.38-3.863 1.449-14.968-14.485 18.831h9.656Z"}),a().createElement("path",{fill:"#FFC610",d:"M79.985 61.275c1.677-2.614 5.564-2.401 6.947.38l14.039 28.226c1.331 2.674-.634 5.81-3.62 5.781l-31.952-.317c-3.146-.031-5.026-3.513-3.327-6.16l17.913-27.91Z"}),a().createElement("path",{fill:"#4E3C1C",d:"M83.432 56.525 61.167 92.901l40.534.52-18.269-36.896ZM80.94 53.73c1.227-2.005 4.183-1.873 5.226.234l19.182 38.74c.991 2.002-.483 4.343-2.716 4.315l-42.56-.546c-2.317-.03-3.72-2.572-2.51-4.548L80.939 53.73Z"}),a().createElement("path",{fill:"#4E3C1C",d:"m80.09 82.58.331-14.408s.344-2.522 2.91-2.171c2.567.345 2.295 2.581 2.295 2.581L83.87 83.075s-.26 1.618-2.01 1.534c-1.689-.083-1.772-2.028-1.772-2.028Zm3.775 6.249c.107-1.206-.738-2.263-1.888-2.363-1.15-.1-2.169.797-2.276 2.003-.107 1.205.739 2.263 1.888 2.362 1.15.1 2.17-.797 2.276-2.002Z"}),a().createElement("path",{fill:"#C69409",d:"M73.072 135.322c-.485-.612 10.907-.172 15.947-.129 3.37.027 2.35 2.048-2.118 2.225-4.467.173.86.479 1.546 1.44.685.958-3.885.789-7.214.828-5.838.075-6.698-1.514-3.658-1.789 5.72-.518-.52-1.527-2.813-1.264-2.293.259-1.69-1.311-1.69-1.311Zm55.105 1.538c-3.049-.508-.052-2.173 7.571-1.808 7.628.364 12.842.05 10.445 1.359-1.422.776-5.711 1.126-3.319 1.856 3.319.469 5.215 1.875-.474 2.344-12.327 0-16.329-.42-13.275-1.406 3.05-.987 3.319-1.876 2.371-1.876-1.896-.469-3.319-.469-3.319-.469Z",opacity:".35"}))},kt=function(){return a().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"180",height:"180",fill:"none"},a().createElement("path",{fill:"#E3FBFD",d:"M90 169.157c43.717 0 79.157-35.44 79.157-79.157S133.717 10.843 90 10.843 10.844 46.283 10.844 90 46.284 169.157 90 169.157Z"}),a().createElement("path",{fill:"#60696C",d:"M145.996 105.442H13.388l-2.89 6.838h135.498v-6.838Z"}),a().createElement("path",{fill:"#BEE0ED",d:"M21.714 112.28h105.59c-2.974 6.48-8.365 3.703-15.801 7.591-7.436 3.888-12.455 9.627-30.116 6.109-17.66-3.517-23.241 1.703-29.743 7.036-8.123 6.663-27.141 3.147-29.93-7.036-2.23-8.146-.31-10.183 0-13.7Z",opacity:".4"}),a().createElement("path",{fill:"#80949D",d:"M140.329 90.38c-5.011-.768-18.468 1.28-24.57 2.399a573.827 573.827 0 0 0 2.73 10.396c6.584-3.36 19.27-2.559 23.767-4.159 4.496-1.6 4.335-7.677-1.927-8.636Z"}),a().createElement("path",{fill:"#9CABB1",d:"M126.008 63.487c.976-11.258-7.601-19.178-18.904-20.15-11.304-.972-19.019 5.618-23.411 16.04-1.184 2.802-5.347 3.924-4.909 5.518 2.311 8.406 17.712 13.852 27.207 14.667 11.311.965 19.041-4.817 20.017-16.075Z"}),a().createElement("path",{fill:"#9CABB1",d:"M85.336 63.794S74.75 53.92 54.678 56.357c-19.155 2.323-32.645 19.531-25.156 46.3 1.708 2.201 4.356 3.467 7.148 3.459l81.168-.25c1.993-3.049 2.984-7.09-1.29-9.787 0 0 5.928-14.23-1.945-20.19L85.336 63.793Z"}),a().createElement("path",{fill:"#FFB596",d:"M141.619 91.114c-.504-.357-1.245-.133-2.005.497-.262.307-.522 1.05.144 1.3.666.249 1.017.074 1.485-.175.467-.25 1.006-1.176.376-1.622Zm1.944 1.733c-.435-.438-1.203-.345-2.061.145-.311.258-.695.945-.082 1.305.612.36.989.249 1.492.083.503-.166 1.195-.986.651-1.533Zm.191 2.47c-.302-.502-1.032-.588-1.934-.33-.345.169-.855.717-.371 1.187.483.47.856.451 1.358.411.501-.04 1.325-.64.947-1.268Zm-1.505 2.288c-.124-.54-.755-.83-1.641-.86-.36.05-.979.395-.682.959.296.563.636.655 1.099.766.463.11 1.379-.19 1.224-.865Zm-3.148-.782c.311-.47.22-.807.533-1.119.795-.793-.482-1.563-.963-2.02-.824-.782-2.823-.35-1.796 1.218.22.335.38.68.223 1.426-.218 1.044 1.371 1.45 2.003.495Z"}),a().createElement("path",{fill:"#80949D",d:"M118.005 105.395a.283.283 0 0 1-.209-.472c.015-.022 1.637-1.844 1.364-4.661-.265-2.78-2.648-3.852-5.806-5.239-.667-.179-7.816-2.023-17.877-1.508-.173 0-.295-.115-.302-.272a.288.288 0 0 1 .273-.3c10.622-.543 18.042 1.523 18.114 1.544.036.007.058.036.093.043 3.847 1.372 5.792 2.723 6.079 5.682.294 3.067-1.442 5.004-1.514 5.083a.268.268 0 0 1-.215.1Z"}),a().createElement("path",{d:"M65.25 98.427c.733-8.063-2.139-16.036-3.666-19.015 3.083 1.765 7.821 11.042 8.854 17.38 2.91 1.407 6.256 3.093 7.032 9.324-1.233-7.308-9.267-7.689-12.22-7.689Zm51.167-2.305c-3.049-2.546-11.502-3.08-15.347-3.029 14.266-1.54 15.759-3.901 17.356-4.877.103 1.13-1.082 6.212-2.009 7.906Zm1.404 9.814 1.18-2.394c0-.323.085-1.311.422-2.689-2.091 3.193-16.718 4.719-23.77 5.083h22.168Zm-1.154-27.897c5.66-2.445 7.793-7.481 8.477-10.067-3.589 7.494-10.153 8.872-16.531 10.067 5.289 1.215 8.054 0 8.054 0Z",fill:"#80949D",opacity:".4"}),a().createElement("path",{fill:"#80949D",d:"M65.349 98.138c-.158 0-.288-.146-.28-.325.093-9.307-1.938-16.36-6.05-20.948-4.995-5.58-11.361-5.458-11.426-5.458h-.007c-.15 0-.28-.138-.28-.317-.007-.18.122-.326.28-.334.072 0 6.681-.122 11.849 5.646 4.22 4.718 6.315 11.925 6.215 21.419-.014.17-.144.317-.302.317Z"}),a().createElement("path",{fill:"#80949D",d:"M77.478 106.281c-.151 0-.273-.079-.28-.183-.237-2.385-1.55-4.266-3.912-5.595-5.382-3.022-14.475-2.212-14.569-2.202-.158.015-.301-.06-.323-.168-.021-.109.087-.207.244-.222.38-.035 9.438-.84 15.007 2.286 2.49 1.398 3.876 3.373 4.12 5.872.014.108-.108.202-.266.207-.007.005-.014.005-.021.005Z"}),a().createElement("path",{fill:"#9CABB1",d:"M112.651 47.92s6.395-9.986 8.455-9.522c2.059.465 3.114 17.927 3.114 17.927l-11.569-8.406Zm-9.394-.137s-8.297-11.03-10.242-10.915c-1.945.122-5.03 18.249-5.03 18.249l15.272-7.334Z"}),a().createElement("path",{fill:"#014266",d:"m111.337 62.479.653-1.887c.029-.086-.065-.179-.18-.172l-2.54.18c-.129.006-.18.128-.093.214l1.837 1.708c.1.1.28.071.323-.043Z"}),a().createElement("path",{fill:"#014266",d:"M108.861 65.288c-.438-.007-.926-.121-1.464-.35a.23.23 0 0 1-.122-.3.233.233 0 0 1 .302-.122c.94.408 1.693.422 2.224.043 1.192-.83 1.055-3.31 1.055-3.33a.227.227 0 0 1 .216-.244.236.236 0 0 1 .244.215c.007.114.15 2.752-1.249 3.73-.345.25-.746.365-1.206.358Z"}),a().createElement("path",{fill:"#014266",d:"M113.224 65.074a1.36 1.36 0 0 1-.416-.065c-1.321-.4-1.945-2.53-1.967-2.623a.221.221 0 0 1 .158-.279.222.222 0 0 1 .28.158c.007.021.581 1.987 1.658 2.308.416.129.876-.021 1.371-.436a.23.23 0 0 1 .323.029.228.228 0 0 1-.029.322c-.467.393-.933.586-1.378.586Z"}),a().createElement("path",{fill:"#fff",d:"M103.952 58.598c.158-1.08-.345-1.78-1.019-2.166a2.84 2.84 0 0 0-1.019-.35c-1.07-.172-2.369.228-2.54 1.293-.173 1.065.243 2.345 1.793 2.745 1.4.358 2.57-.336 2.785-1.522Zm11.153-.186c-.223-1.072.237-1.794.875-2.23a2.84 2.84 0 0 1 .991-.415c1.055-.236 2.382.086 2.619 1.13.237 1.05-.093 2.358-1.615 2.852-1.37.457-2.583-.165-2.87-1.337Z"}),a().createElement("path",{fill:"#014266",d:"M116.229 57.786c.254-1.446 2.589-2.059 3.368-.882.237 1.05-.093 2.358-1.614 2.852-.227.073-.358.1-.694.145-.851-.388-1.218-1.21-1.06-2.115Zm-12.277.812c.095-.653-.051-1.168-.331-1.557-.646-.473-1.869-.483-2.734.376-.731.725-.766 2.144.287 2.703 1.392.358 2.562-.336 2.778-1.522Z"}),a().createElement("path",{fill:"#9CABB1",d:"M47.216 103.022s-17.755-8.063-31.363-2.238c-13.607 5.826-2.476 34.16-6.968 39.828-4.493 5.661 3.732 12.38 9.136 8.699 5.404-3.681 9.258-8.363 6.961-17.419-2.296-9.057-5.411-20.843-.28-23.502 5.132-2.659 23.634-2.309 23.634-2.309l-1.12-3.059Z"}),a().createElement("path",{fill:"#4B545B",d:"M90.193 61.295a.435.435 0 0 1 .337-.514c2.425-.51 4.913-.096 5.875.18a.434.434 0 1 1-.241.835c-.868-.249-3.207-.637-5.454-.165a.436.436 0 0 1-.517-.336Zm38.555-.221a.434.434 0 0 0-.305-.534c-2.094-.57-4.323-.218-5.194.033a.434.434 0 1 0 .242.835c.774-.223 2.831-.545 4.721-.03a.436.436 0 0 0 .536-.304Zm-38.133 3.659a.434.434 0 0 1 .193-.584c2.213-1.111 4.725-1.345 5.725-1.324a.435.435 0 1 1-.018.869c-.903-.02-3.264.201-5.314 1.23a.437.437 0 0 1-.586-.192Zm37.43-.258a.473.473 0 0 0-.161-.615c-1.846-1.166-4.032-1.46-4.913-1.464-.233-.001-.417.199-.411.447.007.247.201.449.434.45.783.003 2.804.278 4.476 1.334.204.128.461.06.575-.152Z"}),a().createElement("path",{fill:"#FFB596",d:"M93.051 39.61c-.684 1.425-.897 6.718-1.016 8.922.305-.069 1.817-.443 2.654-.71-.303-.332-.464-.93-.106-1.011.61-.139 1.41.055 1.85.15 0-.44-.955-.909-.47-1.48.758-.89 1.729 0 2.461.183.076-.484-4.518-7.836-5.373-6.055Zm28.71.851c.706 1.527 1.44 6.891 1.063 10.171-.474-.141-.912-.655-1.64-.973.989-1.4-.909-1.535-2.109-.891.484-.48.965-1.193.46-1.77-.725-.83-2.169.492-2.773.722-.09-.533 4.116-9.168 4.999-7.259Z"}),a().createElement("path",{fill:"#BEE0ED",d:"m140.314 105.022 6.374-38.472 25.722 6.892-13.788 36.486-18.308-4.906Z",opacity:".5"}),a().createElement("path",{fill:"#9BCEE1",d:"m142.437 102.578 2.895-14.83 19.472-.017-6.799 19.018s-2.373-1.885-7.468-3.25-8.1-.921-8.1-.921Z",opacity:".5"}),a().createElement("path",{d:"m168.412 73.452-4.962-1.33-10.481 34.959 2.591.694 12.852-34.323Zm-8.159-2.187 1.543.414-11.087 34.796-.606-.163 10.15-35.047Z",fill:"#fff",opacity:".5"}))};const jt="CSI-module__main__RwL_HYNb",Nt="CSI-module__infoScreenButtonWrap__ZWlw5O5X",Mt="CSI-module__modalContainer__XHWgXw1_",Rt="CSI-module__headline__iBsO_oNC",Bt="CSI-module__headlinePopup__zLVRQQd6",Ft="CSI-module__buttonWrapper__zfifPwsR",Pt="CSI-module__buttonMobile__OhgKQ8qq";var Lt=function(e){function t(){var e;d()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=function(e,t,n){return t=_()(t),h()(e,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),o()(F()(e),"updateContext",(function(){var t=e.props,n=t.context,r=t.uid,o=t.handleUpdateContextThunkAction;r&&o({uid:r,context:n})})),o()(F()(e),"initSurvey",(function(){var t=e.props,n=t.serviceId,r=t.templateId,o=t.context,i=t.operationId,a=t.message,c=t.signature,s=t.signedBy,u=t.popup,l=t.hideFinishScreen,d=t.surveyUID,p=t.isAuthorized,f=t.handleSurveyThunkAction,m=t.handleSurveyUIDThunkAction;d?m({surveyUID:d,hideFinishScreen:l,onFinish:function(){return e.onFinish()},onError:function(t){return e.onError(t)}}):f({requestAuth:{userId:n,patternId:r,context:o,operationId:i},requestUnAuth:{message:a,signature:c,signedBy:s},isAuthorized:p,popup:u,hideFinishScreen:l,onError:function(t){return e.onError(t)},onFinish:function(){return e.onFinish()}})})),o()(F()(e),"onRatingChange",(function(t){var n=e.props,r=n.onSelectRating;(0,n.handleSetRatingAction)(t),r&&r(t)})),o()(F()(e),"handleSubmit",(function(){var t=e.props,n=t.isAuthorized,r=t.handleSubmitThunkAction,o=t.hideFinishScreen;r({onError:e.onError,onSubmit:e.onSubmit,onFinish:e.onFinish,hideFinishScreen:o,isAuthorized:n})})),o()(F()(e),"onCommentChange",(function(t){e.props.handleSetAnswerCommentAction(t)})),o()(F()(e),"onTagChange",(function(t){e.props.handleSetAnswerTagAction(t)})),o()(F()(e),"onActionChange",(function(t){e.props.handleSetAnswerActiveAction(t)})),o()(F()(e),"onFinish",(function(){e.props.onFinish&&e.props.onFinish()})),o()(F()(e),"onShow",(function(){e.props.onShow&&e.props.onShow()})),o()(F()(e),"onError",(function(t){e.props.onError&&e.props.onError(t)})),o()(F()(e),"onSubmit",(function(t){e.props.onSubmit&&e.props.onSubmit(t)})),o()(F()(e),"reset",(function(){e.props.handleResetStateAction()})),o()(F()(e),"handleSuccessImageLoad",(function(){e.props.handleSetImageLoadedAction()})),o()(F()(e),"handleRetrySurvey",(function(){e.props.handleSetLoadingOnAction(),e.initSurvey()})),o()(F()(e),"handleFinishButton",(function(){e.reset(),e.onFinish()})),o()(F()(e),"renderBody",(function(){var t=e.props,n=t.feedbackType,r=t.hideFinishScreen,o=t.popup,i=t.isOnlyRating,c=t.submited,s=t.isInitError,u=t.isSubmitError,l=t.rating,d=t.title,p=t.answers,f=t.actionsInfo,m=t.activeTags,h=t.activeActions,v=t.scale,_=t.bannerSize,b=t.comment,g=t.options,y=t.staticUrl,E=t.isLoading,S=v||n||w.stars;return s?e.FailureLoading():u?e.FailureSending():c?!r||o?e.Success():null:d?a().createElement(xt,{isOnlyRating:i,rating:l,title:d,titleClassName:Bt,feedbackType:S,comment:b,onRatingChange:e.onRatingChange,onCommentChange:e.onCommentChange,onTagChange:e.onTagChange,onActionChange:e.onActionChange,onSubmit:e.handleSubmit,answers:p,options:g,actionsInfo:f,activeTags:m,activeActions:h,bannerSize:_,isPopup:Boolean(o),isLoading:E,staticUrl:y}):null})),e}return g()(t,e),f()(t,[{key:"componentDidMount",value:function(){var e=this;this.initSurvey(),(0,P.batch)((function(){e.props.context&&e.props.handleSetContextAction(e.props.context),e.props.selectRating&&e.props.handleSetRatingAction(e.props.selectRating)}))}},{key:"componentDidUpdate",value:function(e){this.props.isAuthorized?e.operationId===this.props.operationId&&e.templateId===this.props.templateId&&e.serviceId===this.props.serviceId||(this.reset(),this.initSurvey()):e.message===this.props.message&&e.signature===this.props.signature&&e.signedBy===this.props.signedBy&&e.surveyUID===this.props.surveyUID||(this.reset(),this.initSurvey()),e.context!==this.props.context&&this.updateContext()}},{key:"FailureLoading",value:function(){var e=this.props,t=e.bannerSize,n=e.popup,r=e.isLoading,i=J(t);return a().createElement("div",{className:Mt},a().createElement(i,{className:z()(Rt,o()({},Bt,n))},"Не удалось загрузить данные.",a().createElement("br",null),"Проверьте интернет и попробуйте снова."),a().createElement(Tt,null),a().createElement("div",{className:z()(Ft,o()({},Pt,"small"===t))},a().createElement("div",{className:Nt},a().createElement(H.Button,{fluid:!0,"data-e2e-id":"csi_widget_reload",text:"Попробовать снова",intent:H.Intent.PrimaryOutline,onClick:this.handleRetrySurvey,loading:r}))))}},{key:"FailureSending",value:function(){var e=this.props,t=e.bannerSize,n=e.popup,r=e.isLoading,i=J(t);return a().createElement("div",{className:Mt,"data-e2e-id":"csi_widget_error_screen"},a().createElement(i,{className:z()(Rt,o()({},Bt,n))},"Что-то пошло не так при отправлении результата.",a().createElement("br",null),"Попробуйте ещё раз"),a().createElement(kt,null),a().createElement("div",{className:z()(Ft,o()({},Pt,"small"===t))},a().createElement("div",{className:Nt},a().createElement(H.Button,{"data-e2e-id":"csi_widget_retry_button",fluid:!0,text:"Отправить ещё раз",intent:H.Intent.PrimaryOutline,onClick:this.handleSubmit,loading:r}))))}},{key:"Success",value:function(){var e=this.props,t=e.imageLoaded,n=e.bannerSize,r=e.staticUrl,i=t?"CSI-module__successIcon__xp5jMiEq":"CSI-module__successIconHidden__vwLWMHpz",c=t?"CSI-module__imageLoadingHidden__DfWYCnC4":"CSI-module__imageLoading__I6MYQO8Y",s=J(n);return a().createElement("div",{className:Mt,"data-e2e-id":"csi_widget_success_screen"},a().createElement(s,{className:z()(Rt,o()({},Bt,this.props.popup))},"Спасибо за вашу оценку!",a().createElement("br",null),"Это лучшая мотивация для нашей команды"),a().createElement("div",{className:c},a().createElement(W.Loader,{size:W.LoaderSize.ExtraLarge})),a().createElement("img",{src:"".concat(r).concat(Ve),alt:"success",onLoad:this.handleSuccessImageLoad,className:i}),a().createElement("div",{className:z()(Ft,o()({},Pt,"small"===n))},a().createElement("div",{className:Nt},a().createElement(H.Button,{"data-e2e-id":"csi_widget_success_button",fluid:!0,text:"Завершить",intent:H.Intent.PrimaryOutline,onClick:this.handleFinishButton}))))}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.popup,r=e.isOpen,o=e.__className,i=e.handleSetBannerSizeAction;if(t)return null;var c=this.renderBody(),s=a().createElement(Ge,{onShow:this.onShow},c);if(n&&c)return a().createElement(Ke,{isOpen:r,className:jt,onClose:this.onFinish},s);var u=o?z()(jt,o):jt;return c&&a().createElement($e,{className:u,setBannerSize:i},s)}}]),t}(i.Component),Dt={handleSetImageLoadedAction:function(){return{type:K}},handleSetAnswerTagAction:function(e){return{type:ee,payload:e}},handleSetAnswerCommentAction:function(e){return{type:te,payload:e}},handleSetAnswerActiveAction:function(e){return{type:ne,payload:e}},handleSetRatingAction:function(e){return{type:re,payload:e}},handleResetStateAction:function(){return{type:oe}},handleSetBannerSizeAction:function(e){return{type:ie,payload:e}},handleSubmitThunkAction:function(e){var t=e.onError,n=e.onSubmit,r=e.isAuthorized,o=e.hideFinishScreen,i=e.onFinish;return function(e,a){e(me());var c=a(),s=c.comment,u=c.rating,l=c.answers,d=c.activeTags,p=c.actionsInfo,f=c.activeActions,m=c.questionId,h=c.surveyId,v=c.uid,_=c.baseURL,b=c.context,g=l[u-1],y=s||null;(function(e,t){return new Re(e,"results/").sendPostRequest(t)})(_,Ue(Ue({comment:y,value:"star:".concat(u),questionId:m,tags:ye({activeTags:d,answers:l,rating:u}),actions:Se({rating:u,actionsInfo:p,activeActions:f})},r?{surveyId:h}:{surveyUid:v}),{},{context:Be(b)})).then((function(){(0,P.batch)((function(){e(ve()),e({type:se}),e(le(!1))})),n(Ue({rating:{value:u,description:null==g?void 0:g.name},comment:y,tags:ye({withName:!0,activeTags:d,answers:l,rating:u}),actions:Se({withText:!0,rating:u,actionsInfo:p,activeActions:f})},r?{surveyId:h}:{surveyUid:v})),o&&i()})).catch((function(n){e(ve()),e(le(!0)),t&&t(n)}))}},handleSurveyThunkAction:function(e){var t=e.requestAuth,n=e.requestUnAuth,r=e.isAuthorized,o=e.popup,i=e.hideFinishScreen,a=e.onError,c=e.onFinish;return function(e,s){var u=s().baseURL,l=r?function(e,t){var n=t.context,r=Ie()(t,Fe);return new Re(e,"surveys/").sendPostRequest(Le(Le({},r),{},{context:Be(n)})).then((function(e){return{survey:e}})).catch((function(e){return 409===e.status?{survey:e.data,conflict:!0,err:e}:Promise.reject(e)}))}(u,t):function(e,t){return new Re(e,"surveys/").sendPostRequest(t).then((function(e){return{survey:e}})).catch((function(e){return 409===e.status?{survey:e.data,conflict:!0,err:e}:Promise.reject(e)}))}(u,n);l.then((function(t){var n=t.survey,r=t.conflict,s=t.err;(0,P.batch)((function(){e(Y(!1)),e(ve())}));var u=n.pattern,l=n.isFinished;if(r){if(o&&l)return void a(s);if(l)return e(ce(n.disabled)),void(i&&c())}var d=u.screens[0].questions[0];(0,P.batch)((function(){e($({disabled:n.disabled,title:d.name,questionId:d.id,surveyId:n.id,uid:n.uid,answers:d.answers,actionsInfo:Ze(d.actions),scale:u.scale,options:d.options})),e(be(n.context))}))})).catch((function(t){(0,P.batch)((function(){e(ve()),e(Y(!0))})),a(t)}))}},handleSurveyUIDThunkAction:function(e){var t=e.surveyUID,n=e.onError,r=e.onFinish,o=e.hideFinishScreen;return function(e,i){var a=i().baseURL;new Re(a,"surveys/".concat(t)).sendGetRequest().then((function(e){return e})).then((function(t){var n=t.pattern,i=t.id,a=t.uid,c=t.isFinished,s=t.disabled,u=n.screens[0].questions[0];if((0,P.batch)((function(){e(Y(!1)),e(ve())})),c)return e(ce(s)),void(o&&r());e($({disabled:s,title:u.name,questionId:u.id,surveyId:i,uid:a,answers:u.answers,actionsInfo:Ze(u.actions),scale:n.scale,options:u.options}))})).catch((function(t){(0,P.batch)((function(){e(ve()),e(Y(!0))})),n(t)}))}},handleSetLoadingOnAction:me,handleSetContextAction:be,handleUpdateContextThunkAction:function(e){var t=e.context,n=e.uid;return function(e,r){var o=r().updateContextURL;e(be(t)),function(e){var t=e.context;return new Re(e.baseURL,"surveys/".concat(e.uid)).sendPatchRequest({context:Be(t)})}({baseURL:o,context:Be(t),uid:n}).catch((function(e){console.error(e)}))}}},Ut=(0,P.connect)((function(e){return{disabled:e.disabled,submited:e.submited,isInitError:e.isInitError,isSubmitError:e.isSubmitError,imageLoaded:e.imageLoaded,rating:e.rating,title:e.title,answers:e.answers,actionsInfo:e.actionsInfo,activeTags:e.activeTags,activeActions:e.activeActions,scale:e.scale,bannerSize:e.bannerSize,comment:e.comment,options:e.options,isLoading:e.isLoading,baseUrl:e.baseURL,uid:e.uid}}),Dt)(Lt),Zt=function(e){function t(e){var n;d()(this,t),n=function(e,t,n){return t=_()(t),h()(e,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}(this,t,[e]),o()(F()(n),"store",void 0),o()(F()(n),"staticURL",""),n.store=(0,U.createStore)(He,(0,U.applyMiddleware)(D()));var r=e.env,i=e.onError,a=void 0===i?function(){return null}:i,c=e.isAuthorized,s=function(e){switch(String(e).toLowerCase()){case"local":return{env:E.qa,backendBaseUrl:"/backend/api/v1",backendPublicBaseUrl:"/backend/api/public/v1",sentryDsn:"https://a7276d4a96ae4d7da71e41b028499e68@dev-sentry.domclick.ru/179",staticUrl:"https://statics.qa-dc.ru/widgets/csi_widget"};case"qa":case"qa-dc":return{env:E.qa,backendBaseUrl:"https://feedback.qa-dc.ru/backend/api/v1",backendPublicBaseUrl:"https://feedback.qa-dc.ru/backend/api/public/v1",sentryDsn:"https://a7276d4a96ae4d7da71e41b028499e68@dev-sentry.domclick.ru/179",staticUrl:"https://statics.qa-dc.ru/widgets/csi_widget"};case"stage":case"staging":case"stage-dc":return{env:E.stage,backendBaseUrl:"https://feedback.stage-dc.ru/backend/api/v1",backendPublicBaseUrl:"https://feedback.stage-dc.ru/backend/api/public/v1",sentryDsn:"https://c3322da108b54a169a9cc4ec957ebb22@dev-sentry.domclick.ru/180",staticUrl:"https://statics.stage-dc.ru/widgets/csi_widget"};case"prod":case"production":return{env:E.prod,backendBaseUrl:"https://feedback.domclick.ru/backend/api/v1",backendPublicBaseUrl:"https://feedback.domclick.ru/backend/api/public/v1",sentryDsn:"https://8e3cc6d865154e11b3c56cb9b6c7cbe5@sentry24.domclick.ru/295",staticUrl:"https://statics.domclick.ru/widgets/csi_widget"};default:return null}}(r);if(s){var u=c?s.backendBaseUrl:s.backendPublicBaseUrl;(0,P.batch)((function(){var e;n.store.dispatch({type:de,payload:u}),n.store.dispatch((e=s.backendPublicBaseUrl,{type:pe,payload:e}))})),n.staticURL=s.staticUrl}else{var l=new Error("CSI widget: env prop is not valid, acceptable values are: qa, qa-dc, stage, stage-dc, staging, prod, production");console.error(l),a(l)}return n}return g()(t,e),f()(t,[{key:"componentDidMount",value:function(){(0,Z.sendAnalytics)({element_id:"bcc3e0dfb94d89046cd41ece68021867",element_type:"widget",event_type:"view",event_sense:{version:String(I),buildNumber:String(O)}})}},{key:"render",value:function(){return a().createElement(P.Provider,{store:this.store},a().createElement(Ut,{signature:this.props.signature,templateId:this.props.templateId,signedBy:this.props.signedBy,message:this.props.message,selectRating:this.props.selectRating,surveyUID:this.props.surveyUID,serviceId:this.props.serviceId,onSelectRating:this.props.onSelectRating,onSubmit:this.props.onSubmit,onFinish:this.props.onFinish,onError:this.props.onError,onShow:this.props.onShow,staticUrl:this.staticURL,feedbackType:this.props.feedbackType,operationId:this.props.operationId,context:this.props.context,popup:Boolean(this.props.popup),isOpen:Boolean(this.props.isOpen),isOnlyRating:Boolean(this.props.isOnlyRating),isAuthorized:Boolean(this.props.isAuthorized),hideFinishScreen:Boolean(this.props.hideFinishScreen),__className:this.props.__className}))}}]),t}(i.Component);function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=function(e){return u(e)?a().createElement(j,{env:e.env,templateId:e.templateId},a().createElement(Zt,zt(zt({},e),{},{popup:!1,isAuthorized:c(e)}))):null},Ht=function(e){return u(e)?s()&&window[N]?(e.onError&&e.onError(new Error("There is an open popup on a page")),null):a().createElement(j,{env:e.env,templateId:e.templateId},a().createElement(Zt,zt(zt({},e),{},{popup:!0,onShow:function(){s()&&(window[N]=!0),e.onShow&&e.onShow()},onFinish:function(){s()&&delete window[N],e.onFinish&&e.onFinish()},isAuthorized:c(e)}))):null};return t})(),e.exports=r()},91823:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__DO_NOT_USE__ActionTypes:()=>c,applyMiddleware:()=>f,bindActionCreators:()=>d,combineReducers:()=>u,compose:()=>p,createStore:()=>s});var r=n(1838);function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var i="function"==typeof Symbol&&Symbol.observable||"@@observable",a=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function s(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(o(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(o(1));return n(s)(e,t)}if("function"!=typeof e)throw new Error(o(2));var a=e,u=t,l=[],d=l,p=!1;function f(){d===l&&(d=l.slice())}function m(){if(p)throw new Error(o(3));return u}function h(e){if("function"!=typeof e)throw new Error(o(4));if(p)throw new Error(o(5));var t=!0;return f(),d.push(e),function(){if(t){if(p)throw new Error(o(6));t=!1,f();var n=d.indexOf(e);d.splice(n,1),l=null}}}function v(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(o(7));if(void 0===e.type)throw new Error(o(8));if(p)throw new Error(o(9));try{p=!0,u=a(u,e)}finally{p=!1}for(var t=l=d,n=0;n<t.length;n++)(0,t[n])();return e}return v({type:c.INIT}),(r={dispatch:v,subscribe:h,getState:m,replaceReducer:function(e){if("function"!=typeof e)throw new Error(o(10));a=e,v({type:c.REPLACE})}})[i]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(o(11));function n(){e.next&&e.next(m())}return n(),{unsubscribe:t(n)}}})[i]=function(){return this},e},r}function u(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:c.INIT}))throw new Error(o(12));if(void 0===n(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},c=0;c<s.length;c++){var u=s[c],l=n[u],d=e[u],p=l(d,t);if(void 0===p)throw t&&t.type,new Error(o(14));i[u]=p,r=r||p!==d}return(r=r||s.length!==Object.keys(e).length)?i:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error(o(16));var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=l(i,t))}return n}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),i=function(){throw new Error(o(15))},a={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},c=t.map((function(e){return e(a)}));return i=p.apply(void 0,c)(n.dispatch),(0,r.Z)((0,r.Z)({},n),{},{dispatch:i})}}}},31879:(e,t,n)=>{"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}n.r(t),n.d(t,{default:()=>i});var o=r();o.withExtraArgument=r;const i=o},65334:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),o="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},c=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&s()}function c(){a(i)}function s(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(c,t);o=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){o&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){o&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;c.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),l=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},p=_(0,0,0,0);function f(e){return parseFloat(e)||0}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+f(e["border-"+n+"-width"])}),0)}var h="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return o?h(e)?function(e){var t=e.getBBox();return _(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return p;var r=d(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=f(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,c=f(r.width),s=f(r.height);if("border-box"===r.boxSizing&&(Math.round(c+i)!==t&&(c-=m(r,"left","right")+i),Math.round(s+a)!==n&&(s-=m(r,"top","bottom")+a)),!function(e){return e===d(e).document.documentElement}(e)){var u=Math.round(c+i)-t,l=Math.round(s+a)-n;1!==Math.abs(u)&&(c-=u),1!==Math.abs(l)&&(s-=l)}return _(o.left,o.top,c,s)}(e):p}function _(e,t,n,r){return{x:e,y:t,width:n,height:r}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),g=function(e,t){var n,r,o,i,a,c,s,u=(r=(n=t).x,o=n.y,i=n.width,a=n.height,c="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(c.prototype),l(s,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),s);l(this,{target:e,contentRect:u})},y=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new g(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),E="undefined"!=typeof WeakMap?new WeakMap:new r,w=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new y(t,n,this);E.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){w.prototype[e]=function(){var t;return(t=E.get(this))[e].apply(t,arguments)}}));const S=void 0!==i.ResizeObserver?i.ResizeObserver:w},72159:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},11093:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},34509:(e,t,n)=>{var r=n(72159);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},94772:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},66797:(e,t,n)=>{var r=n(59374);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},45724:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},10085:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports},14188:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},94985:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8420:(e,t,n)=>{var r=n(66867);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},40233:(e,t,n)=>{var r=n(45449).default,o=n(73968);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},84682:(e,t,n)=>{var r=n(11093),o=n(10085),i=n(79335),a=n(14188);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},21386:(e,t,n)=>{var r=n(34509),o=n(45724),i=n(79335),a=n(94985);e.exports=function(e){return r(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},79335:(e,t,n)=>{var r=n(72159);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);